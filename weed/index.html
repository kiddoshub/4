<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grateful Dead x Matrix: SF Countdown</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- VT323 Mono font for that retro feel -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
    :root {
      --bg-color:    #000;
      --clr-primary: #00ffe8;
      --clr-accent:  #ffec00;
      --font-mono:   'VT323', monospace;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html, body {
      width:100vw; height:100vh; overflow:hidden;
      background: var(--bg-color);
      font-family: var(--font-mono);
      color: var(--clr-primary);
    }
    /* Header */
    #header {
      position: absolute; top: 3vh; width:100%;
      text-align: center;
      font-size: 4vw;
      color: var(--clr-accent);
      text-shadow:
        0 0 8px var(--clr-accent),
        0 0 20px var(--clr-accent);
      z-index: 40;
      pointer-events: none;
    }
    /* Full-screen canvases */
    canvas {
      position: absolute; top:0; left:0;
      width:100vw; height:100vh;
      pointer-events: none;
    }
    #matrix { z-index: 1; mix-blend-mode: screen; }
    #psygeo  { z-index: 2; mix-blend-mode: screen; }
    /* Timer box */
    #timer-wrap {
      position: absolute;
      top: 40%; left: 50%;
      transform: translate(-50%,-50%);
      padding: 1vw 2vw;
      border: 0.5vw solid var(--clr-accent);
      z-index: 39;
      pointer-events: none;
    }
    #main-timer {
      font-size: 12vw;
      line-height: 1;
      text-align: center;
      color: var(--clr-accent);
      text-shadow:
        0 0 12px var(--clr-accent),
        0 0 44px #ffd700;
    }
    /* Scrolling ticker */
    #ticker-wrap {
      position: absolute; bottom: 5vh; left: 0;
      width:100vw; overflow:hidden;
      z-index: 38;
      pointer-events: none;
    }
    #ticker {
      white-space: nowrap;
      font-size: 3.5vw;
      color: var(--clr-primary);
      text-shadow: 0 0 8px var(--clr-primary);
      will-change: transform;
    }
  </style>
</head>
<body>

  <div id="header">GRATEFUL DEAD SF COUNTDOWN</div>
  <canvas id="matrix"></canvas>
  <canvas id="psygeo"></canvas>

  <div id="timer-wrap">
    <div id="main-timer">00:00:00:00</div>
  </div>

  <div id="ticker-wrap">
    <div id="ticker"></div>
  </div>

  <script>
  (function(){
    // —— Config —— 
    const cfg = {
      deadline:    new Date('2025-08-01T00:00:00-07:00'),
      tickerText:  ' DEAD & COMPANY • BILLY STRINGS • STURGILL SIMPSON • TREY ANASTASIO BAND • ',
      doneText:    'THE GOLDEN ROAD',
      charset:     'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789⚡'
    };

    // —— Elements & state —— 
    const mCanvas = document.getElementById('matrix'),
          mCtx    = mCanvas.getContext('2d'),
          gCanvas = document.getElementById('psygeo'),
          gCtx    = gCanvas.getContext('2d'),
          timerEl = document.getElementById('main-timer'),
          tickerEl= document.getElementById('ticker');
    let W, H, cols, fontSize, drops, tickerX = 0;

    // —— Resize & init —— 
    function resize() {
      W = mCanvas.width = gCanvas.width = window.innerWidth;
      H = mCanvas.height = gCanvas.height = window.innerHeight;
      fontSize = Math.max(24, Math.floor(W / 110));
      cols = Math.floor(W / fontSize);
      drops = new Array(cols).fill(1);
      tickerEl.textContent = cfg.tickerText.repeat(6);
    }
    window.addEventListener('resize', resize);
    resize();

    // —— Timer update —— 
    function updateTimer(){
      const ms = cfg.deadline - new Date();
      if(ms <= 0){
        timerEl.textContent = cfg.doneText;
        return;
      }
      const s   = Math.floor(ms / 1000),
            d   = Math.floor(s / 86400),
            h   = Math.floor((s % 86400)/3600),
            m   = Math.floor((s % 3600)/60),
            sec = s % 60;
      timerEl.textContent = [d,h,m,sec]
        .map(n=>String(n).padStart(2,'0'))
        .join(':');
    }
    setInterval(updateTimer,1000);
    updateTimer();

    // —— Matrix rain —— 
    function drawMatrix(){
      mCtx.fillStyle = 'rgba(0,0,0,0.05)';
      mCtx.fillRect(0,0,W,H);
      mCtx.font = `${fontSize}px VT323`;
      for(let i=0; i<cols; i++){
        const ch = cfg.charset[Math.floor(Math.random()*cfg.charset.length)];
        mCtx.fillStyle = (Math.random()>0.97 ? '#ffec00' : '#00ffe8');
        mCtx.fillText(ch, i*fontSize, drops[i]*fontSize);
        if(drops[i]*fontSize > H && Math.random()>0.975) drops[i]=0;
        drops[i]++;
      }
    }

    // —— Psychedelic geometry —— 
    function drawGeo(){
      gCtx.clearRect(0,0,W,H);
      const cx = W/2, cy = H/2, size = W*0.1;
      gCtx.save();
      gCtx.translate(cx, cy);
      gCtx.rotate(performance.now()/5000);
      gCtx.beginPath();
      for(let i=0;i<3;i++){
        const ang = i*(2*Math.PI/3) - Math.PI/2;
        gCtx.lineTo(Math.cos(ang)*size, Math.sin(ang)*size);
      }
      gCtx.closePath();
      gCtx.lineWidth = 4;
      gCtx.strokeStyle = 'rgba(0,255,232,0.2)';
      gCtx.shadowColor = '#0ff';
      gCtx.shadowBlur = 15;
      gCtx.stroke();
      gCtx.restore();
    }

    // —— Ticker scroll & loop —— 
    function loop(){
      drawMatrix();
      drawGeo();
      tickerX -= 1.5;
      const tw = tickerEl.scrollWidth;
      if(-tickerX > tw/2) tickerX = 0;
      tickerEl.style.transform = `translateX(${tickerX}px)`;
      requestAnimationFrame(loop);
    }
    loop();

  })();
  </script>
</body>
</html>