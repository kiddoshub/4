<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GRADUATE PYRAMID ENGINE</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background: #0b0c10;
      overflow: hidden;
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
      background: radial-gradient(#0b0c10, #040507);
    }
  </style>
</head>
<body>
  <canvas id="pyramidCanvas"></canvas>
  <script>
    const canvas = document.getElementById('pyramidCanvas');
    const ctx = canvas.getContext('2d');

    let width, height;
    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    const layers = 30;
    const baseSize = 400;
    const layerHeight = 10;
    const stepShrink = 0.92;
    const camera = { x: 0, y: 0, z: -800, pitch: -0.5, yaw: 0 };

    document.addEventListener('mousemove', e => {
      camera.yaw = (e.clientX / width - 0.5) * 2;
      camera.pitch = (e.clientY / height - 0.5) * -2;
    });

    function project(x, y, z) {
      const cosY = Math.cos(camera.yaw), sinY = Math.sin(camera.yaw);
      const cosX = Math.cos(camera.pitch), sinX = Math.sin(camera.pitch);

      let dx = x;
      let dy = y * cosX - z * sinX;
      let dz = y * sinX + z * cosX;

      let px = dx * cosY - dz * sinY;
      let pz = dx * sinY + dz * cosY;

      const scale = 700 / (pz - camera.z);
      return {
        x: width / 2 + px * scale,
        y: height / 2 + dy * scale
      };
    }

    function drawPyramid() {
      ctx.clearRect(0, 0, width, height);

      let size = baseSize;
      for (let i = 0; i < layers; i++) {
        const y = -i * layerHeight;
        const s = size / 2;

        const points = [
          project(-s, y, -s),
          project(s, y, -s),
          project(s, y, s),
          project(-s, y, s)
        ];

        ctx.beginPath();
        ctx.moveTo(points[0].x, points[0].y);
        for (let p of points) ctx.lineTo(p.x, p.y);
        ctx.closePath();

        const gradient = ctx.createLinearGradient(points[0].x, points[0].y, points[2].x, points[2].y);
        gradient.addColorStop(0, `hsl(${(i * 7 + performance.now() / 50) % 360}, 100%, 30%)`);
        gradient.addColorStop(1, `hsl(${(i * 7 + performance.now() / 50 + 60) % 360}, 100%, 10%)`);

        ctx.fillStyle = gradient;
        ctx.fill();
        ctx.strokeStyle = '#000';
        ctx.lineWidth = 1;
        ctx.stroke();

        size *= stepShrink;
      }
    }

    function animate() {
      drawPyramid();
      requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>
</html>