<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Grateful Dead x Matrix: SF Countdown</title>
  <meta name="viewport" content="width=3840, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0; padding: 0; overflow: hidden;
      width: 100vw; height: 100vh; background: #000;
    }
    body {
      font-family: 'VT323', monospace;
      width: 100vw; height: 100vh;
    }
    .artlayer, .overlay {
      position: absolute; left: 0; top: 0; width: 100vw; height: 100vh;
      pointer-events: none; z-index: 5; mix-blend-mode: lighten;
    }
    .overlay { z-index: 20; }
    #matrix { position: absolute; left: 0; top: 0; width: 100vw; height: 100vh; z-index: 2; pointer-events: none; }
    #psygeo { position: absolute; left: 0; top: 0; width: 100vw; height: 100vh; z-index: 3; pointer-events: none; }
    #main-timer {
      position: absolute; top: 38vh; left: 0; width: 100vw;
      font-size: 15vw; color: #00ff41; text-align: center;
      text-shadow:
        0 0 12px #00ff41,
        0 0 44px #0F0,
        0 0 24px #00FF41,
        0 1px 1px #fff,
        0 3px 3px #006600;
      filter: brightness(1.15) contrast(1.15);
      letter-spacing: 0.07em; z-index: 40; line-height: 1;
      font-family: 'VT323', monospace;
      background: transparent; mix-blend-mode: screen;
      user-select: none;
    }
    #ticker-wrap {
      position: absolute; top: 61vh; left: 0; width: 100vw; height: 7vw;
      overflow: hidden; z-index: 44; pointer-events: none;
    }
    #ticker {
      position: absolute; top: 1vw; left: 0;
      font-family: 'VT323', monospace;
      font-size: 3.7vw; white-space: nowrap; color: #00FF41;
      text-shadow: 0 0 8px #00ff41, 0 0 12px #0F0, 0 0 10px #00FF41;
      filter: brightness(1.12); will-change: transform; mix-blend-mode: screen;
      letter-spacing: 0.045em;
    }
    @media (max-width: 1920px) {
      #main-timer { font-size: 12vw; }
      #ticker { font-size: 4vw; }
    }
    /* CRT scanlines effect */
    #crt { opacity: 0.14; z-index: 50; }
    /* VHS static overlay */
    #vhs { opacity: 0.11; z-index: 51; filter: blur(0.6px) brightness(1.45);}
    /* Holo shimmer overlay */
    #holo { opacity: 0.12; z-index: 52; filter: blur(0.6px) brightness(1.4);}
  </style>
</head>
<body>
  <!-- Replace these .artlayer src with your authentic Dead graphics: -->
  <img class="artlayer" src="IMG_8667.jpeg" style="opacity:0.98;">
  <!-- Optional: add more images, e.g. skulls, bears, posters, tie-dye scans, all as <img class="artlayer"> -->
  <!-- CRT scanline overlay: PNG, use your own or e.g. https://i.imgur.com/rLDR2hY.png -->
  <img class="overlay" id="crt" src="https://minkinphotographystore.com/cdn/shop/products/BobMinkinGD08-17-91_24JJ-CMYK_large.jpg?v=1590808710">
  <!-- VHS static overlay: GIF or PNG, use your own or e.g. https://i.imgur.com/LyPUdT4.gif -->
  <img class="overlay" id="vhs" src="https://gifdb.com/images/high/grateful-dead-album-cover-skeleton-and-roses-80rmjsohi7nl7nwy.gif">
  <!-- Holo shimmer overlay: PNG or JPG, use your own or e.g. https://i.imgur.com/EcPOlHh.png -->
  <img class="overlay" id="holo" src="https://images.saymedia-content.com/.image/c_limit%2Ccs_srgb%2Cq_auto:eco%2Cw_500/MTc2MjY2OTUxMTM1NDA1MjQ2/the-acid-test-1965.webp">

  <canvas id="matrix"></canvas>
  <canvas id="psygeo"></canvas>
  <div id="main-timer">00:00:00:00</div>
  <div id="ticker-wrap"><div id="ticker"></div></div>

<script>
/* === Config === */
const DEAD_DATE = new Date('2025-08-01T00:00:00-07:00'); // SF: Aug 1, 2025, midnight
const TICKER_TEXT = ' DEAD & COMPANY   •   BILLY STRINGS   •   STURGILL SIMPSON   •   TREY ANASTASIO BAND   • ';
const FONT = "'VT323', monospace";

/* === Matrix Code Rain === */
const canvas = document.getElementById('matrix'), ctx = canvas.getContext('2d');
let w = window.innerWidth, h = window.innerHeight;
canvas.width = w; canvas.height = h;
let fontSize = Math.max(24, Math.floor(w/110));
let columns = Math.floor(w / fontSize);
let drops = Array(columns).fill(1);
let charset = "アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズヅブプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロゴゾドボポヴッンABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
function drawMatrix() {
  ctx.globalAlpha = 0.87;
  ctx.fillStyle = "#0007";
  ctx.fillRect(0, 0, w, h);
  ctx.globalAlpha = 1;
  ctx.font = fontSize + "px VT323, monospace";
  for(let i=0; i<drops.length; i++) {
    let char = charset[Math.floor(Math.random() * charset.length)];
    ctx.fillStyle = Math.random() > 0.97 ? "#ccffcc" : "#00FF41";
    let x = i * fontSize, y = drops[i] * fontSize;
    ctx.shadowColor = "#0f0";
    ctx.shadowBlur = Math.random()>0.99 ? 20 : 0;
    ctx.fillText(char, x, y);
    ctx.shadowBlur = 0;
    if(y > h && Math.random() > 0.974) drops[i]=0;
    drops[i]++;
  }
}

/* === Psychedelic Spirals/Triangles === */
const geo = document.getElementById('psygeo'), gtx = geo.getContext('2d');
geo.width = w; geo.height = h;
function drawSpirals() {
  gtx.clearRect(0,0,w,h);
  let cx=w/2, cy=h/2, arms=4+Math.floor(Math.random()*3);
  for(let a=0; a<arms; a++){
    gtx.save();
    gtx.translate(cx,cy); gtx.rotate(Math.PI*2*a/arms+performance.now()/3500);
    gtx.beginPath();
    let maxR = w/2.6;
    for(let t=0;t<Math.PI*8;t+=0.08){
      let r = 12+maxR*t/(Math.PI*8);
      let x = Math.cos(t)*r, y = Math.sin(t)*r;
      gtx.lineTo(x, y);
    }
    gtx.lineWidth = 1.7 + Math.sin(performance.now()/320+a)*1.1;
    gtx.strokeStyle = "rgba(0,255,65,0.12)";
    gtx.shadowColor="#60ff60"; gtx.shadowBlur=13;
    gtx.stroke(); gtx.restore();
  }
}
function drawTriangles() {
  let cx=w*0.80, cy=h*0.22, s=w*0.13;
  gtx.save();
  gtx.beginPath();
  for(let i=0;i<3;i++){
    let ang = Math.PI*2*i/3-Math.PI/2;
    gtx.lineTo(cx+Math.cos(ang)*s, cy+Math.sin(ang)*s);
  }
  gtx.closePath();
  gtx.lineWidth=3.2;
  gtx.strokeStyle="rgba(0,255,65,0.17)";
  gtx.shadowColor="#bbffbb"; gtx.shadowBlur=12;
  gtx.stroke(); gtx.restore();
}
function renderGeo() { drawSpirals(); drawTriangles(); requestAnimationFrame(renderGeo);}
renderGeo();

/* === Main Animation === */
function render() { drawMatrix(); requestAnimationFrame(render);}
render();

/* === Responsive === */
window.addEventListener('resize', ()=>{
  w = window.innerWidth; h = window.innerHeight;
  canvas.width = w; canvas.height = h;
  geo.width = w; geo.height = h;
  fontSize = Math.max(24, Math.floor(w/110));
  columns = Math.floor(w / fontSize);
  drops = Array(columns).fill(1);
});

/* === Timer === */
function updateTimer() {
  let now = new Date(), ms = DEAD_DATE - now;
  let s = Math.floor(ms/1000), d=Math.max(0,Math.floor(s/86400)),
      h_=Math.max(0,Math.floor((s%86400)/3600)),
      m=Math.max(0,Math.floor((s%3600)/60)),
      sec=Math.max(0,Math.floor(s%60));
  let out = (d<10?'0':'')+d+":"+(h_<10?'0':'')+h_+":"+(m<10?'0':'')+m+":"+(sec<10?'0':'')+sec;
  document.getElementById('main-timer').textContent = out;
}
setInterval(updateTimer, 900);
updateTimer();

/* === Ticker === */
const ticker = document.getElementById('ticker');
ticker.textContent = TICKER_TEXT.repeat(8);
let tickerX=0;
function moveTicker() {
  tickerX -= 1.35;
  let tw = ticker.scrollWidth;
  if (-tickerX > tw/2) tickerX = 0;
  ticker.style.transform = `translateX(${tickerX}px)`;
  requestAnimationFrame(moveTicker);
}
moveTicker();

/* === Loop VHS static overlay for effect === */
const vhs = document.getElementById('vhs');
setInterval(()=>{ vhs.src = vhs.src.split('?')[0]+'?'+Date.now(); }, 4100);

/* === CRT flicker/RGB analog warble on timer === */
setInterval(()=>{
  let e=document.getElementById('main-timer');
  e.style.textShadow=
    `0 0 12px #00ff41,
     1px 2px 8px #0F0,
     ${Math.random()*8-4}px ${Math.random()*4-2}px 12px #00FF41,
     0 1px 1px #fff,
     0 3px 3px #006600`;
}, 97);
</script>
</body>
</html>